
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") 
}

enum Tool {
  caption
  hook
  idea
  hashtag
}

model User {
  id            String        @id @default(uuid()) @db.Uuid
  email         String        @unique
  passwordHash  String
  name          String
  createdAt     DateTime      @default(now()) @db.Timestamptz(6)

  generations   Generation[]

  @@map("users")
}

model Generation {
  id          String   @id @default(uuid()) @db.Uuid
  userId      String   @db.Uuid
  tool        Tool
  inputText   String  
  outputText  String   
  isSaved     Boolean  @default(false)
  createdAt   DateTime @default(now()) @db.Timestamptz(6)

  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, createdAt(sort: Desc)])
  @@index([userId, isSaved])
  @@map("generations")
}
